<!-- Single Field Detail Widget HTML Template -->
<!-- Updated to match combined widget design -->
<div class="single-field-detail-widget">
  
  <!-- Loading State -->
  <div class="detail-loading" ng-if="c.isLoading">
    <div class="loading-spinner">
      <div class="spinner"></div>
      <span>{{c.loadingMessage}}</span>
    </div>
  </div>

  <!-- Error State -->
  <div class="detail-error" ng-if="c.errorMessage && !c.isLoading">
    <i class="fa fa-exclamation-triangle"></i>
    <p>{{c.errorMessage}}</p>
  </div>

  <!-- Content -->
  <div class="detail-content" ng-if="c.field && !c.isLoading">
    
    <!-- Field Title -->
    <h1 class="field-title">{{c.field.field_name}}</h1>
    
    <!-- Status Label -->
    <div class="status-label">
      <i class="fa fa-warning"></i>
      <span>{{c.getStatusText()}}</span>
    </div>

    <!-- Score Section -->
    <div class="score-section">
      <label class="section-label">Score</label>
      <span class="score-badge" ng-class="c.getScoreClass()">
        {{c.field.score || 'N/A'}}
      </span>
    </div>

    <!-- Why This Failed / Reason Section -->
    <div class="reason-section" ng-if="c.field.reason || c.field.logic_transparency">
      <label class="section-label">Why this failed:</label>
      <div class="reason-box">
        {{c.field.reason || c.field.logic_transparency}}
      </div>
    </div>

    <!-- Source Evidence Section -->
    <div class="source-section" ng-if="c.hasSource()">
      <label class="section-label">Source Evidence</label>
      
      <div class="source-card">
        <!-- Document Info -->
        <div class="doc-row" ng-if="c.field.attachmentData">
          <i class="fa fa-file-pdf-o doc-icon"></i>
          <div class="doc-info">
            <span class="doc-name">{{c.field.attachmentData.file_name}}</span>
            <span class="doc-location">
              Page {{c.field.page_number}}
              <span ng-if="c.field.section_name"> â€¢ {{c.field.section_name}}</span>
            </span>
          </div>
        </div>

        <!-- Extracted Text -->
        <div class="extracted-section" ng-if="c.field.extracted_text">
          <label class="extracted-label">Extracted Text:</label>
          <div class="extracted-box">
            "{{c.field.extracted_text}}"
          </div>
        </div>
      </div>

      <!-- View in Document Button -->
      <button class="view-doc-btn" ng-click="c.viewInDocument()" ng-if="c.hasSource()">
        <i class="fa fa-file-text-o"></i>
        View in Document
      </button>
    </div>

    <!-- No Source Available -->
    <div class="no-source-section" ng-if="!c.hasSource()">
      <div class="no-source-message">
        <i class="fa fa-info-circle"></i>
        <p>No source evidence available for this field</p>
      </div>
    </div>

    <!-- Commentary Section -->
    <div class="commentary-section" ng-if="c.field.commentary">
      <label class="section-label">Commentary</label>
      <div class="commentary-box">
        {{c.field.commentary}}
      </div>
    </div>

  </div>

</div>
